<?xml version="1.0"?>
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">

    <configBuilders>
        <builders>
            <!-- An xml file which contains sensitive data and is not stored in the repo. Our config builder will read it and pull the values into our app settings at run time. -->
            <add name="UserSecrets"
                 userSecretsFile="~/../../secrets.debug/usersecrets.xml"
                 mode="Greedy"
                 prefix="AppSetting_"
                 stripPrefix="true"
                 type="Microsoft.Configuration.ConfigurationBuilders.UserSecretsConfigBuilder, Microsoft.Configuration.ConfigurationBuilders.UserSecrets, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                 xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>

            <!-- A json file which contains sensitive data and is not stored in the repo. Our config builder will read it and pull the values into our app settings at run time. IMPORTANT - see https://github.com/aspnet/MicrosoftConfigurationBuilders/blob/main/samples/SampleWebApp/App_Data/settings.json -->
            <add name="Json"
                 jsonFile="~/../../secrets.debug/seed.json"
                 mode="Greedy"
                 jsonMode="Sectional"
                 type="Microsoft.Configuration.ConfigurationBuilders.SimpleJsonConfigBuilder, Microsoft.Configuration.ConfigurationBuilders.Json"
                 xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>

            <!-- Also pull the connection strings in from a JSON file. They are not stored in the repo, for security reasons. -->
            <add name="ConnectionStringsJson"
                 jsonFile="~/../../secrets.debug/connections.json"
                 mode="Greedy"
                 jsonMode="Sectional"
                 type="Microsoft.Configuration.ConfigurationBuilders.SimpleJsonConfigBuilder, Microsoft.Configuration.ConfigurationBuilders.Json"
                 xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>
        </builders>
    </configBuilders>

    <appSettings>
        <!-- Define where our DBContext class(es) should look, for their database initializer(s) -->
        <!-- Initializer for this class (LEFT) in this assembly (LEFT), is found in this class (RIGHT) in this assembly (RIGHT) -->
        <add key="DatabaseInitializerForType App472.WebUI.Models.IDDBContext, App472.WebUI" value="App472.WebUI.App_Start.Debug.IDDBInitializer, App472.WebUI" xdt:Transform="SetAttributes" xdt:Locator="Match(key)"/>
        <add key="DatabaseInitializerForType App472.Domain.Concrete.EFDBContext, App472.Domain" value="App472.WebUI.App_Start.Debug.EFDBInitializer, App472.WebUI" xdt:Transform="SetAttributes" xdt:Locator="Match(key)"/>
    </appSettings>

</configuration>